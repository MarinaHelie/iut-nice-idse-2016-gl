"use strict";angular.module("unoApp",["ngAnimate","ngCookies","ngResource","ngSanitize","ui.router","LocalStorageModule"]).config(["$httpProvider",function(a){a.interceptors.push(["$rootScope",function(a){return a.isLoading=0,{request:function(b){return a.isLoading++,b},requestError:function(b){return a.isLoading=Math.max(0,a.isLoading-1),b},response:function(b){return a.isLoading=Math.max(0,a.isLoading-1),b},responseError:function(b){return a.isLoading=Math.max(0,a.isLoading-1),b}}}])}]).config(["localStorageServiceProvider",function(a){a.setStorageType("sessionStorage")}]).config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("login",{url:"/login",templateUrl:"views/login.html",controller:"LoginController"}).state("register",{url:"/register",templateUrl:"views/register.html",controller:"RegisterController"}).state("app",{url:"/app","abstract":!0,templateUrl:"views/app.html",controller:"AppController"}).state("app.home",{url:"/home",templateUrl:"views/home.html",controller:"HomeController",resolve:{Games:["$http","$q",function(a,b){var c=b.defer();return a.get("/rest/lobby/games").then(function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise}]}}).state("app.start",{url:"/start",templateUrl:"views/start.html",controller:"StartController"}).state("app.game",{url:"/game/:name",templateUrl:"views/game.html",controller:"GameController"}),b.otherwise("/login")}]),angular.module("unoApp").controller("AppController",["$rootScope","$scope","$state","Auth",function(a,b,c,d){d.isConnected()?b.user=d.getUser():c.go("login"),b.goLogout=function(){d.destroyUser(),c.go("login")}}]),angular.module("unoApp").controller("GameController",["$rootScope","$scope","$http","$stateParams",function(a,b,c,d){c.get("/rest/game/"+d.name+"/"+b.user.name+"/hand").then(function(a){b.cartes=a.data.cartes},function(a){b.error="Une erreur est survenue !"}),b.piocherCarte=function(){b.cartes.push(b.cartes[b.cartes.length%8])},b.jouerCarte=function(a){b.cartes.splice(b.cartes.indexOf(a),1),b.fausse=a}}]),angular.module("unoApp").controller("HomeController",["$scope","Games",function(a,b){a.games=b.data.games}]),angular.module("unoApp").controller("StartController",["$rootScope","$scope","$state","$http",function(a,b,c,d){b.goGame=function(){b.game&&b.game.length>3&&b.user.name&&d.post("/rest/initializer/creategame",{_token:"hbj7BB7Y6B87T282B87T27N90A098",game:b.game,player:b.user.name}).then(function(a){switch(a.status){case 200:c.go("app.game",{name:b.game});break;case 405:b.error="Tu participes déjà à cette partie !";break;case 500:b.error="Partie déjà créée !";break;default:b.error="Une erreur est survenue..."}},function(a){b.error="Une erreur est survenue : "+a})}}]),angular.module("unoApp").controller("LoginController",["$rootScope","$scope","$state","Auth",function(a,b,c,d){d.isConnected()&&c.go("app.home"),b.goLogin=function(){window.alert("Log in not available !")},b.goLoginGuess=function(){d.setUser({name:"Anonyme"+Math.floor(999*Math.random()+1)}),c.go("app.home")}}]),angular.module("unoApp").controller("RegisterController",["$rootScope","$scope","$state","Auth",function(a,b,c,d){d.isConnected()&&c.go("app.home"),b.goRegister=function(){window.alert("Register not available !")}}]),angular.module("unoApp").service("Auth",["localStorageService",function(a){return{getUser:function(){return a.get("user")},setUser:function(b){a.set("user",b)},isConnected:function(){return!!a.get("user")},destroyUser:function(){a.remove("user")}}}]),angular.module("unoApp").run(["$templateCache",function(a){a.put("views/app.html",'<header data-ng-include="\'views/struct/header.html\'"></header> <div id="game" class="container-fluid" data-ui-view=""></div> <!--<footer data-ng-include="\'views/struct/footer.html\'"></footer>-->'),a.put("views/game.html",'<div id="table-game"> <div id="pioche" data-ng-click="piocherCarte()"></div> <div id="fausse" class="carte {{fausse.famille}}-{{fausse.nombre}}"></div> </div> <div id="main"> <ul> <li data-ng-repeat="carte in cartes track by $index" data-ng-click="jouerCarte(carte)" class="carte {{carte.famille}}-{{carte.nombre}}"></li> </ul> </div>'),a.put("views/home.html",'<div class="jumbotron"> <button class="btn btn-success" id="ingage" data-ui-sref="app.start"> Commencer une partie </button> </div> <div class="col-md-6"> <div class="panel panel-default"> <div class="panel-heading text-center">Toutes les parties</div> <div class="panel-body text-center"> <!-- Mettre la liste de toutes les parties ici dans un tableau en bouclant sur les parties pour les afficher --> <table id="allGames"> <tr> <th>Nom du créateur</th> <th>Nombre de joueurs</th> <th>Statut de la partie</th> </tr> <!-- foreach(partie in parties){ --> <tr> <td>partie["createur"]</td> <td>partie["nbJoueurs"]</td> <td>partie["etat"]</td> </tr> <!-- end foreach --> </table> </div> </div> </div> <div class="col-md-6"> <div class="panel panel-default"> <div class="panel-heading text-center">Mes parties</div> <div class="panel-body text-center"> Mettre la liste de mes parties ici dans un tableau en bouclant sur les parties pour les afficher </div> </div> </div>'),a.put("views/login.html",'<div id="login" class="container"> <div class="col-md-12 text-center"> <h1 class="title-uno"> <span class="color-orange">U</span><span class="color-rouge">N</span><span class="color-vert">O</span> </h1> <br> <div class="col-md-6"> <div class="panel panel-default" style="height: 305px"> <div class="panel-heading">Login</div> <div class="panel-body"> <form method="post" class="form-horizontal" data-ng-submit="goLogin()"> <div class="form-group"> <input class="input-form input-lg" type="email" placeholder="Email" id="email" data-ng-model="email"> </div> <div class="form-group"> <input class="input-form input-lg" type="password" placeholder="Password" id="pass" data-ng-model="pass"> </div> <br> <button type="submit" class="btn btn-lg btn-success">Login</button> </form> </div> </div> <br> </div> <div class="col-md-6"> <div class="panel panel-default" style="height: 305px"> <div class="panel-heading">- OR -</div> <div class="panel-body"> <br> <br> <button data-ng-click="goLoginGuess();" style="font-size: 26pt" class="btn btn-lg btn-success">Connect Guest</button> <br> <br> </div> </div> </div> <div class="col-md-12"> <p> <span class="hidden-sm hidden-md hidden-lg"> <br> <br> </span> You don\'t have an account ? <br> <button class="btn btn-danger" data-ui-sref="register">Register</button> </p> </div> </div> </div>'),a.put("views/register.html",'<div id="register" class="container"> <div class="col-md-offset-3 col-md-6 text-center"> <h1 class="title-uno"> <span class="color-orange">U</span><span class="color-rouge">N</span><span class="color-vert">O</span> </h1> <br> <div class="col-md-12"> <div class="panel panel-default"> <div class="panel-heading">Register</div> <div class="panel-body"> <form method="post" class="form-horizontal" data-ng-submit="goRegister()"> <div class="form-group"> <input class="input-form input-lg" type="text" placeholder="Prénom" id="prenom" data-ng-model="prenom"> </div> <div class="form-group"> <input class="input-form input-lg" type="email" placeholder="Email" id="email" data-ng-model="email"> </div> <div class="form-group"> <input class="input-form input-lg" type="password" placeholder="Password" id="pass" data-ng-model="pass"> </div> <br> <button type="submit" class="btn btn-lg btn-success">Register</button> </form> </div> </div> </div> <br> <p> You already have an account ? <br> <button class="btn btn-danger" data-ui-sref="login">Login</button> </p> </div> </div>'),a.put("views/start.html",'<div id="start" class="container"> <div class="col-md-offset-3 col-md-6 text-center"> <div data-ng-if="error" class="alert alert-danger"> {{error}} </div> <h1 class="title-uno">Configuration</h1> <br> <form class="form-horizontal" data-ng-submit="goGame()"> <div class="form-group"> <input id="username" class="input-form input-lg" type="text" data-ng-model="game" placeholder="Party name"> </div> <button type="submit" class="btn btn-lg btn-success" style="font-size: 24pt">GO !</button> </form> <br> </div> </div>'),a.put("views/struct/footer.html","<span> By LP SIL IDSE </span>"),a.put("views/struct/header.html",'<nav class="navbar"> <div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-toggle" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href data-ui-sref="app.home"> <span class="color-orange">U</span><span class="color-rouge">N</span><span class="color-vert">O</span> </a> </div> <div class="collapse navbar-collapse" id="navbar-toggle"> <ul class="nav navbar-nav navbar-right"> <li> {{user.name}} </li> <li> <a href data-ng-click="goLogout()"> <i class="fa fa-sign-out"></i> </a> </li> </ul> </div> </div> </nav>')}]);